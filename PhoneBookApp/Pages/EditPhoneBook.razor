@page "/editPhoneBook/{id:int}"

@using PhoneBookApp.Interfaces
@using PhoneBookApp.Entities

@inject IPhoneBookService phoneBookService
@inject Microsoft.AspNetCore.Components.NavigationManager navigationManager
<h2>
    Изменение данных о сотруднике
</h2>
<div class="row">
    <div class="col-md-4">
        <form>
            <div class="form-group">
                <label for="LastName" class="control-label">Фамилия</label>
                <input for="LastName" class="form-control"
                       @bind-value="@phoneBook.LastName" />
                <label for="FirstName" class="control-label">Имя</label>
                <input for="FirstName" class="form-control"
                       @bind-value="@phoneBook.FirstName" />
                <label for="SecondName" class="control-label">Отчество</label>
                <input for="SecondName" class="form-control"
                       @bind-value="@phoneBook.SecondName" />
                <label for="RoleName" class="control-label">Должность</label>
                <input for="RoleName" class="form-control"
                       @bind-value="@phoneBook.RoleName" />
                <label for="DeptName" class="control-label">Подразделение</label>
                <input for="DeptName" class="form-control"
                       @bind-value="@phoneBook.DeptName" />
                <label for="Phone" class="control-label">Телефон</label>
                <input for="Phone" class="form-control"
                       @bind-value="@phoneBook.Phone" />
            </div>
            <div class="form-group">
                <button type="button" class="btn btn-primary"
                        @onclick="() => UpdatePhoneBookAsync()">
                    Сохранить
                </button>
                <button type="button" class="btn btn-warning"
                        @onclick="() => cancel()">
                    Отмена
                </button>
            </div>
        </form>
    </div>
</div>

@code  {

    [Parameter]
    public int id { get; set; }

    PhoneBook phoneBook = new PhoneBook();

    protected override async Task OnInitializedAsync()
    {
        phoneBook = await
          phoneBookService.GetById(id);
    }

    protected async Task UpdatePhoneBookAsync()
    {
        await phoneBookService.Update(phoneBook);
        navigationManager.NavigateTo("/phoneBookList");
    }

    void cancel()
    {
        navigationManager.NavigateTo("/phoneBookList");
    }
}